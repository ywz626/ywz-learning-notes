# 拼团需求分析

![group-buy-market-1-1-04.png](https://article-images.zsxq.com/FjW9-_oANsD7xG_Ek_cTjbI6e1FV)

### 1. 拼团配置表

![group-buy-market-1-2-02.png](https://article-images.zsxq.com/Fsoj5BPPTlEH6pRFOB0_QkDl6Cjt)![img]()

如图，详细设计表；拼团活动表、折扣配置表、人群标签表、人群标签任务表、人群标签明细表。

-   拼团活动表：设定了拼团的成团规则，人群标签的使用可以限定哪些人可见，哪些人可参与。
-   折扣配置表：拆分出拼团优惠到一个新的表进行多条配置。如果折扣还有更多的复杂规则，则可以配置新的折扣规则表进行处理。
-   人群标签表：专门来做人群设计记录的，这3张表就是为了把符合规则的人群ID，也就是用户ID，全部跑任务到一个记录下进行使用。比如黑玫瑰人群、高净值人群、拼团履约率90%以上的人群等。

### 2. 参与拼团表

![group-buy-market-1-2-03.png](https://article-images.zsxq.com/FkrC1G0DtRmk12NpSeDVHfhUMZ1V)![img]()

如图，详细设计表；拼团账户表、用户拼单表、用户拼单明细、回调任务表。

-   

    拼团账户表：记录用户的拼团参与数据，一个是为了限制用户的参与拼团次数，另外是为了人群标签任务统计数据。

-   

    用户拼单表：当有用户发起首次拼单的时候，产生拼单id，并记录所需成团的拼单记录，另外是写上拼团的状态、唯一索引、回调接口等。这样拼团完成就可以回调对接的平台，通知完成了。【微信支付也是这样的设计，回调支付结果，这样的设计可以方便平台化对接】当再有用户参与后，则写入用户拼单明细表。直至达成拼团。

-   

    回调任务表：当拼团完成后，要做回调处理。但可能会有失败，所以加入任务的方式进行补偿。如果仍然失败，则需要对接的平台，自己查询拼团结果。

![group-buy-market-1-3-04.png](https://article-images.zsxq.com/FvJSxcL6XiME54xkSBRnR_4MROAd)

# 抽象模板设计

